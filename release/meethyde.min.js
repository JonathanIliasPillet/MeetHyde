function Api(a,e,t,n,o){e="https://api.github.com"+e,e+=/\?/.test(e)?"&":"?",e+="&"+(new Date).getTime(),n&&Object.keys(n).length>1&&(n=JSON.stringify(n)),$.ajax({type:a,url:e,data:n,dataType:"json",beforeSend:function(a){a.setRequestHeader("Accept","application/vnd.github.v3+json"),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.setRequestHeader("Authorization","token "+$.trim(AccessToken))},success:function(a){t(a)},error:function(a,e,n){t(a.status)}})}function CurrentUser(a){Api("GET","/user",a)}function Repos(a){Api("GET","/user/repos?type=public",a)}function Tree(a,e){Api("GET",RepoPath+"git/trees/"+a,function(a){e(a.tree)})}function Content(a,e,t){Api("GET",RepoPath+"contents"+(a?"/"+encodeURI(a):""),t,{ref:e})}function Read(a,e,t){Api("GET",RepoPath+"contents/"+encodeURI(a)+"?ref="+e,function(a){t(window.atob(a.content))})}function Sha(a,e,t){Api("GET",RepoPath+"contents/"+a+"?ref="+e,function(n){403===n?(cut=a.lastIndexOf("/"),fname=a.substring(cut+1),findIn=decodeURI(a).replace("/"+fname,""),Content(findIn,e,function(e){$.each(e,function(e,n){n.path===decodeURI(a)&&t(n.sha)})})):t(404===n?n:n.sha)})}function Write(a,e,t,n,o){Sha(encodeURI(a),e,function(i){Api("PUT",RepoPath+"contents/"+encodeURI(a),o,{message:n,content:t,branch:e,sha:i})})}function Create(a,e,t,n,o){Api("PUT",RepoPath+"contents/"+encodeURI(a),o,{message:n,content:t,branch:e})}function Delete(a,e,t){Sha(encodeURI(a),e,function(n){Api("DELETE",RepoPath+"contents/"+encodeURI(a),t,{message:a+" is removed",sha:n,branch:e})})}function Rename(a,e,t){Api("PATCH",a,t,{name:e})}function Fork(a,e,t){Api("POST","/repos/"+a+"/"+e+"/forks",t)}function ShowWebsites(){RepoName="",RepoPath="",RepoOwner="",RepoBranch="",ElementName="",ElementPath="",FrontMatter="",HtmlContents="",MdContents="",SelectedImages=[],FilesToDelete=[],$(".loading").is(":hidden")&&$(".loading, .noclick").toggle(),$("header .title").text("My websites").removeAttr("data-site"),$("header .url, aside .list .title, aside .list ul, main .content, main .images").empty(),$("body").attr("data-content","sites"),$(".breadcrumb .fa-home").nextAll().remove(),Repos(function(a){_totalPages=0,_totalRepos=a.length,$.each(a,function(a,e){e.has_pages===!0&&(e.name===e.owner.login+".github.io"?(_url=e.html_url,_repoUrl=e.name,_branch="master"):(_url=e.html_url+"/tree/gh-pages",_repoUrl=UserLogin.toLowerCase()+".github.io/"+e.name,_branch="gh-pages"),$("main .content").append('<div class="card"><div class="card-block"><a href="'+_url+'" target="_blank"><i class="fa fa-github-square"></i></a> '+e.name+'</div><div data-site="'+e.name+'" data-owner="'+e.owner.login+'" data-branch="'+_branch+'" data-url="'+_repoUrl+'" class="card-footer">Manage <i class="fa fa-arrow-circle-o-right"></i></div></div>'),_totalPages+=1)}),$("aside .my-websites .label").text(_totalPages),_totalRepos<1?$("main .content").append('<div class="alert alert-danger" role="alert"><strong>Oh oh!</strong> It seems like there are no public repositories in your account. Meet Hyde only tracks pubic repositories because websites are meant to be public right?"</div>'):_totalPages<1&&$("main .content").append('<div class="alert alert-danger" role="alert"><strong>Oh oh!</strong> It seems like there are no websites in any of your repositories. Meet Hyde only tracks repositories with "gh-pages" branches and user pages which are repositories named this way: "user-name.github.io"</div>'),$(".loading").is(":visible")&&$(".loading, .noclick").toggle()})}function Root(a,e,t,n,o){FrontMatter="",HtmlContents="",MdContents="",ElementName="",ElementPath="",SelectedImages=[],FilesToDelete=[],ShowPages=o,RepoName=a,RepoOwner=e,RepoPath="/repos/"+RepoOwner+"/"+RepoName+"/",RepoBranch=t,RepoUrl=n,$("main .content, main .images, aside ul, #FTitle").empty(),$(".loading, .noclick").toggle(),$("body").attr("data-content","dir"),$(".title").text(RepoName).attr("data-site",RepoName).attr("data-owner",RepoOwner).attr("data-branch",RepoBranch).attr("data-url",RepoName),o?$("body").attr("data-pages","1"):($("header .url").html('(<a href="http://'+RepoUrl+'" target="_blank">'+RepoUrl+"</a>)"),$("body").attr("data-pages","0")),Tree(RepoBranch,function(a){$.each(a,function(a,e){e.path.match(".md$")&&"README.md"!==e.path||e.path.match(".html$")||e.path.match(".htm$")||".DS_Store"===e.path||"_site"===e.path?o&&($("#FTitle").text("Pages"),e.path.match(".jpg$")||e.path.match(".png$")||e.path.match(".JPG$")||e.path.match(".PNG$")||e.path.match(".gif$")||e.path.match(".GIF$")||e.path.match(".svg$")||e.path.match(".SVG$")?$("main .images").append('<div class="card image" data-name="'+e.name+'" data-path="'+e.path+'"><div class="card-block"><img src="https://raw.githubusercontent.com/'+RepoOwner+"/"+RepoName+"/"+RepoBranch+"/"+e.path+'"><div class="options"><span class="name">'+e.path+'</span><span class="delete" data-path="'+e.path+'">delete</span></div></div></div>'):(e.path.match(".md$")&&"README.md"!==e.path||e.path.match(".html$")||e.path.match(".htm$"))&&$("main .content").append('<div class="card" data-icon="'+e.type+'" ><div class="card-block"><i class="fa"> </i><div class="options"><span class="delete" data-path="'+e.path+'">delete</span></div></div><div class="card-footer" data-type="'+e.type+'" data-path="'+e.path+'" data-name="'+e.path+'" >'+e.path+' <i class="fa"></i></div></div>')):(o||(e.path.match(".jpg$")||e.path.match(".png$")||e.path.match(".JPG$")||e.path.match(".PNG$")||e.path.match(".gif$")||e.path.match(".GIF$")||e.path.match(".svg$")||e.path.match(".SVG$")?$("main .images").append('<div class="card image" data-name="'+e.name+'" data-path="'+e.path+'"><div class="card-block"><img src="https://raw.githubusercontent.com/'+RepoOwner+"/"+RepoName+"/"+RepoBranch+"/"+e.path+'"><div class="options"><span class="name">'+e.path+'</span><span class="delete" data-path="'+e.path+'">delete</span></div></div></div>'):$("main .content").append('<div class="card" data-icon="'+e.type+'" ><div class="card-block"><i class="fa"> </i><div class="options"><span class="delete" data-path="'+e.path+'">delete</span></div></div><div class="card-footer" data-type="'+e.type+'" data-path="'+e.path+'" data-name="'+e.path+'" >'+e.path+' <i class="fa"></i></div></div>')),e.path.match(".jpg$")||e.path.match(".png$")||($("aside ul").append('<li data-type="'+e.type+'" data-path="'+e.path+'" data-name="'+e.path+'"><i class="fa"></i> '+e.path+"</li>"),$("aside ul").each(function(){$('[data-type="blob"]',this).prependTo(this),$('[data-type="tree"]',this).appendTo(this)}))),"CNAME"===e.path&&Read("CNAME",RepoBranch,function(a){-1!=a.indexOf(".")&&$("header .url").html('(<a href="http://'+a+'" target="_blank">'+a+"</a>)")})}),o||$("main .content").append('<div class="card" data-icon="tree" ><div class="card-block"><i class="fa"> </i></div><div class="card-footer" data-site="'+RepoName+'" data-owner="'+RepoOwner+'" data-branch="'+RepoBranch+'" data-pages="'+!0+'">Pages <i class="fa"></i></div></div>'),$("aside ul").append('<li data-site="'+RepoName+'" data-owner="'+RepoOwner+'" data-branch="'+RepoBranch+'" data-url="'+RepoName+'" data-pages="'+!0+'"><i class="fa fa-folder-open-o"></i> Pages</li>'),$(".loading, .noclick").toggle()})}function Open(a,e){FrontMatter="",HtmlContents="",MdContents="",SelectedImages=[],ElementName=a,ElementPath=e,$(".loading, .noclick").toggle(),$("body").attr("data-content","dir"),$("#FTitle").text(ElementName),$("main .content, main .images").empty(),$("body").attr("data-pages","0"),Content(ElementPath,RepoBranch,function(a){404!==a?($.each(a,function(a,e){e.path.match(".DS_Store$")||(e.path.match(".jpg$")||e.path.match(".png$")||e.path.match(".JPG$")||e.path.match(".PNG$")||e.path.match(".gif$")||e.path.match(".GIF$")||e.path.match(".svg$")||e.path.match(".SVG$")?$("main .images").append('<div class="card image" data-name="'+e.name+'" data-path="'+e.path+'"><div class="card-block"><img src="'+e.download_url+'"><div class="options"><span class="name">'+e.name+'</span><span class="delete" data-path="'+e.path+'">delete</span></div></div></div>'):$("main .content").append('<div class="card" data-icon="'+e.type+'"><div class="card-block"><i class="fa"></i><div class="options"><span class="delete" data-path="'+e.path+'">delete</span></div></div><div class="card-footer" data-type="'+e.type+'" data-path="'+e.path+'" data-name="'+e.name+'" >'+e.name+' <i class="fa"></i></div></div>'))}),$(".loading, .noclick").toggle()):($("header .breadcrumb span:last-child span").trigger("click"),$(".loading, .noclick").toggle())})}function Edit(a,e,t){FrontMatter="",HtmlContents="",MdContents="",ElementName=a,ElementPath=e,$(".loading, .noclick").toggle(),$("body").attr("data-content","file"),$("#FTitle").text(ElementName),$("main .content, main .images").empty(),$("body").attr("data-pages","0"),Read(ElementPath,RepoBranch,function(a){"md"===t?("---\n"===a.substring(0,4)?(FrontMatter=$.trim(a.split("---")[1].split("---")[0]),a=a.replace(FrontMatter,""),a=a.replace("---",""),a=$.trim(a.replace("---",""))):FrontMatter="Replace this text with your Front Matter block.\n\n! TIP: You can skip the triple-dashed lines (---), they will be added automatically",mdEditor(a,FrontMatter)):htmlEditor(a,"main .content"),$(".loading, .noclick").toggle()})}function htmlEditor(a,e){HtmlContents=a,$(e).html('<pre id="editor"></pre>'),$("main .content").append('<div class="fileActions">'+SaveBtn+"</div>"),$(".fileActions .btn").html('<i class="fa fa-check"></i> Up to date');var t=ace.edit("editor");t.$blockScrolling=1/0,t.session.setMode("ace/mode/html"),t.setOption("enableEmmet",!0),t.renderer.setScrollMargin(10,10),t.setOptions({autoScrollEditorIntoView:!0}),t.setValue(HtmlContents,-1),t.getSession().setTabSize(htmlEditorTabSize),t.on("input",function(){HtmlContents===t.getValue()?$(".fileActions .btn").html('<i class="fa fa-check"></i> Up to date').attr("disabled",!0):$(".fileActions .btn").html('<i class="fa fa-save"></i> Save').attr("disabled",!1)})}function mdEditor(a,e){function t(a){var e=a.codemirror,t=n(e);o(e,t.image,"\n"+InsertImage+"\n",""),InsertImage=""}function n(a,e){e=e||a.getCursor("start");var t=a.getTokenAt(e);if(!t.type)return{};for(var n,o,i=t.type.split(" "),s={},l=0;l<i.length;l++)n=i[l],"strong"===n?s.bold=!0:"variable-2"===n?(o=a.getLine(e.line),/^\s*\d+\.\s/.test(o)?s["ordered-list"]=!0:s["unordered-list"]=!0):"atom"===n?s.quote=!0:"em"===n?s.italic=!0:"quote"===n?s.quote=!0:"strikethrough"===n?s.strikethrough=!0:"comment"===n&&(s.code=!0);return s}function o(a,e,t,n){if(!/editor-preview-active/.test(a.getWrapperElement().lastChild.className)){var o,i=a.getCursor("start"),s=a.getCursor("end");e?(o=a.getLine(i.line),t=o.slice(0,i.ch),n=o.slice(i.ch),a.replaceRange(t+n,{line:i.line,ch:0})):(o=a.getSelection(),a.replaceSelection(t+o+n),i.ch+=t.length,i!==s&&(s.ch+=t.length)),a.setSelection(i,s),a.focus()}}MdContents=a,$("main .content").html('<ul class="nav nav-tabs" role="tablist"><li class="nav-item"><a class="nav-link active" href="#editContent" role="tab" data-toggle="tab">Content</a></li><li class="nav-item"><a class="nav-link" href="#editFm" role="tab" data-toggle="tab">Front Matter</a></li></ul><div class="tab-content"><div role="tabpanel" class="tab-pane active" id="editContent"><textarea class="form-control" id="mdEditor"></textarea></div><div role="tabpanel" class="tab-pane" id="editFm"></div></div>'),htmlEditor(e,"#editFm"),simplemde=new SimpleMDE({element:document.getElementById("mdEditor"),spellChecker:!1,tabSize:4,toolbar:["bold","italic","strikethrough","|","heading","heading-smaller","heading-bigger","|","code","quote","unordered-list","ordered-list","horizontal-rule","|","link",{name:"image",className:"search-image fa fa-picture-o",action:searchImage,title:"Insert Image"},{name:"image2",className:"insert-image fa fa-times",action:t,title:"Insert Image"},"|","side-by-side",{name:"expand",action:mdexpand,className:"expand fa fa-arrows-alt",title:"Toggle Fullscreen"},"fullscreen","preview"]}),SimpleMDE._drawImage=t,SimpleMDE.prototype._drawImage=function(){t(this)},simplemde.value(MdContents),$(".editor-toolbar .fa-columns").trigger("click"),$(".fa-arrows-alt:not(.expand)").hide(),$("main .content").wrapInner('<div id="md-editor" class="nofull" />'),$(".editor-toolbar").append('<div class="fileActions">'+SaveBtn+"</div>"),$(".editor-toolbar .actions").toggle(),simplemde.codemirror.on("change",function(){MdContents===simplemde.value()?$(".fileActions .btn").html('<i class="fa fa-check"></i> Up to date').attr("disabled",!0):$(".fileActions .btn").html('<i class="fa fa-save"></i> Save').attr("disabled",!1)})}function mdexpand(){$(".expand").toggleClass("isactive"),$("#md-editor").toggleClass("nofull"),$(".editor-toolbar .actions").toggle()}function searchImage(){$("#MdImage").modal("toggle"),MdImage()}function MdImage(a){$("#MdImage .folders, #MdImage .files").empty(),$("#MdImage .loading, .noclick").toggle(),a?($("#MdImage .breadcrumb").attr("data-current-path",a),Content(a,RepoBranch,function(a){404!==a?$.each(a,function(a,e){e.path.match(".DS_Store$")||(e.path.match(".jpg$")||e.path.match(".png$")||e.path.match(".JPG$")||e.path.match(".PNG$")||e.path.match(".gif$")||e.path.match(".GIF$")||e.path.match(".svg$")||e.path.match(".SVG$")?$("#MdImage .files").append('<div class="image"><img class="cardSelect" src="https://raw.githubusercontent.com/'+RepoOwner+"/"+RepoName+"/"+RepoBranch+"/"+e.path+'"><div class="options"><span class="name">'+e.path+'</span></div><div data-name="'+e.name+'" data-url="https://raw.githubusercontent.com/'+RepoOwner+"/"+RepoName+"/"+RepoBranch+"/"+e.path+'" class="btn btn-success btn-block"><i class="fa fa-check"></i>Add</div></div>'):$("#MdImage .folders").append('<div class="folder" data-path="'+e.path+'"><i class="fa fa-folder-open-o"></i><div>'+e.name+"</div></div>"))}):$("header .breadcrumb span:last-child span").trigger("click"),$("#MdImage .loading, .noclick").toggle()})):($("#MdImage .breadcrumb").html('<span data-path="">'+RepoName+"</span>"),Tree(RepoBranch,function(a){$.each(a,function(a,e){"tree"===e.type?$("#MdImage .folders").append('<div class="folder" data-path="'+e.path+'"><i class="fa fa-folder-open-o"></i><div>'+e.path+"</div></div>"):(e.path.match(".jpg$")||e.path.match(".png$")||e.path.match(".JPG$")||e.path.match(".PNG$")||e.path.match(".gif$")||e.path.match(".GIF$")||e.path.match(".svg$")||e.path.match(".SVG$"))&&$("#MdImage .files").append('<div class="image"><img class="cardSelect" src="https://raw.githubusercontent.com/'+RepoOwner+"/"+RepoName+"/"+RepoBranch+"/"+e.path+'"><div class="options"><span class="name">'+e.path+'</span></div><div data-name="'+e.name+'" data-url="https://raw.githubusercontent.com/'+RepoOwner+"/"+RepoName+"/"+RepoBranch+"/"+e.path+'" class="btn btn-success btn-block"><i class="fa fa-check"></i>Add</div></div>')}),$("#MdImage .loading, .noclick").toggle()}))}function saveChanges(){$("#commit").val()&&(CommitMsg=$("#commit").val()),$(".fileActions .btn").html('<div class="spinner"><div class="double-bounce1"></div><div class="double-bounce2"></div></div>').attr("disabled",!0),MdContents?editor.getValue().indexOf("Replace this text with your Front Matter block.")>=0?_saveContent=simplemde.value():"---\n"===editor.getValue().substring(0,4)?_saveContent="---\n"+$.trim(editor.getValue().split("---")[1].split("---")[0])+"\n---\n"+simplemde.value():_saveContent="---\n"+$.trim(editor.getValue())+"\n---\n"+simplemde.value():_saveContent=editor.getValue(),Write(ElementPath,RepoBranch,window.btoa(_saveContent),CommitMsg,function(a){$(".fileActions .btn").html('<i class="fa fa-check"></i> Up to date'),CommitMsg="Changes made by "+UserLogin,HtmlContents=editor.getValue(),"md"===MdContents&&(MdContents=simplemde.value()),$("#commit").val("")})}function CurrentDate(){var a=new Date,e=a.getMonth()+1,t=a.getDate();return a.getFullYear()+"-"+(10>e?"0":"")+e+"-"+(10>t?"0":"")+t+"-"}$("#toggle").click(function(){$("body").toggleClass("toggled"),$("header + div").toggleClass("row")}),$("#back").click(function(){1===$("header .breadcrumb").children().length?ShowWebsites():$("header .breadcrumb span:last-child span").trigger("click")});var UserLogin,UserAvatar,UserHtmlUrl,UserUrl,UserId,PublicRepos,ReposUrl,RepoName,RepoPath,RepoOwner,RepoBranch,RepoUrl,CommitMsg="Changes made by ",SaveBtn='<button type="button" class="btn btn-success" disabled></button>',ElementName,ElementPath,InsertImage="",SelectedImages=[],FrontMatter=!1,HtmlContents,MdContents,FilesToDelete=[];CurrentUser(function(a){null===a.name?_displayName=a.login:_displayName=a.name,UserLogin=a.login,UserAvatar=a.avatar_url,UserHtmlUrl=a.html_url,UserUrl=a.url,UserId=a.id,PublicRepos=a.public_repos,ReposUrl=a.repos_url,$(".avatar").attr("src",UserAvatar),$(".user-name").html('<a src="'+UserHtmlUrl+'">'+_displayName+"</a>"),$("#commit").attr("placeholder",CommitMsg+UserLogin),ShowWebsites(),$(".loading, body > .noclick").toggle()}),$(".my-websites").click(function(){ShowWebsites(),$(this).hasClass("fa")&&$(this).nextAll().remove()}),$("body").on("click","[data-site]",function(){$(".breadcrumb .fa-home").nextAll().remove(),$(this).attr("data-pages")&&$(".breadcrumb").append('<span class="repo"><i class="fa fa-angle-double-right"></i> <span data-site="'+RepoName+'" data-owner="'+RepoOwner+'" data-branch="'+RepoBranch+'" data-url='+RepoUrl+">"+RepoName+"</span></span>"),Root($(this).attr("data-site"),$(this).attr("data-owner"),$(this).attr("data-branch"),$(this).attr("data-url"),$(this).attr("data-pages"))}),$("body").on("click",'[data-type="tree"], [data-type="dir"], [data-type="breadcrumb"]',function(){"tree"===$(this).attr("data-type")?($(".breadcrumb .fa-home").nextAll().remove(),$(".breadcrumb").append('<span class="repo"><i class="fa fa-angle-double-right"></i> <span data-site="'+RepoName+'" data-owner="'+RepoOwner+'" data-branch="'+RepoBranch+'" data-url="'+RepoUrl+'">'+RepoName+"</span></span>")):"breadcrumb"===$(this).attr("data-type")?($(this).parent(".folder").nextAll().remove(),$(this).parent(".folder").remove()):$(".breadcrumb").append('<span class="folder"><i class="fa fa-angle-double-right"></i> <span data-type="breadcrumb" data-path="'+ElementPath+'" data-name="'+ElementName+'">'+ElementName+"</span></span>"),Open($(this).attr("data-name"),$(this).attr("data-path"))}),$("body").on("click",'[data-type="blob"], [data-type="file"]',function(){"blob"===$(this).attr("data-type")?("CNAME"===$(this).attr("data-name")||$(this).attr("data-name").match(".yml$")||$(this).attr("data-name").match(".xml$"))&&($(".breadcrumb .fa-home").nextAll().remove(),$(".breadcrumb").append('<span class="repo"><i class="fa fa-angle-double-right"></i> <span data-site="'+RepoName+'" data-owner="'+RepoOwner+'" data-branch="'+RepoBranch+'" data-url="'+RepoUrl+'">'+RepoName+"</span></span>")):$(this).attr("data-name").match(".html$")||$(this).attr("data-name").match(".md$")||$(this).attr("data-name").match(".htm$")||$(".breadcrumb").append('<span class="folder"><i class="fa fa-angle-double-right"></i> <span data-type="breadcrumb" data-path="'+ElementPath+'" data-name="'+ElementName+'">'+ElementName+"</span></span>"),$(this).attr("data-name").match(".html$")||$(this).attr("data-name").match(".md$")||$(this).attr("data-name").match(".htm$")?($("#Editors .modal-footer .btn").attr("data-type",$(this).attr("data-type")).attr("data-name",$(this).attr("data-name")).attr("data-path",$(this).attr("data-path")).attr("data-class",$(this).attr("data-class")),$("#Editors").modal("toggle")):Edit($(this).attr("data-name"),$(this).attr("data-path"),"html")}),$("#Editors .modal-footer .btn").click(function(){"blob"===$(this).attr("data-type")?($(".breadcrumb .fa-home").nextAll().remove(),$(".breadcrumb").append('<span class="repo"><i class="fa fa-angle-double-right"></i> <span data-site="'+RepoName+'" data-owner="'+RepoOwner+'" data-branch="'+RepoBranch+'" data-url="'+RepoUrl+'">'+RepoName+"</span></span>"),($(this).attr("data-name").match(".md$")&&"README.md"!==$(this).attr("data-name")||$(this).attr("data-name").match(".html$")||$(this).attr("data-name").match(".htm$"))&&$(".breadcrumb").append('<span class="repo"><i class="fa fa-angle-double-right"></i> <span data-site="'+RepoName+'" data-owner="'+RepoOwner+'" data-branch="'+RepoBranch+'" data-url="'+RepoUrl+'" data-pages="'+!0+'">Pages</span></span>')):$(".breadcrumb").append('<span class="folder"><i class="fa fa-angle-double-right"></i> <span data-type="breadcrumb" data-path="'+ElementPath+'" data-name="'+ElementName+'">'+ElementName+"</span></span>"),Edit($(this).attr("data-name"),$(this).attr("data-path"),$(this).attr("data-editor"))}),$("body").on("click","#MdImage [data-path]",function(){MdImage($(this).attr("data-path")),$(this).hasClass("folder")?$("#MdImage .breadcrumb").append('<i class="fa fa-angle-double-right"></i><span class="image-path" data-path="'+$(this).attr("data-path")+'">'+$(this).children("div").html()+"</span>"):$(this).nextAll().remove()}),$("#MdImage .folders").mousewheel(function(a,e){this.scrollLeft-=30*e,a.preventDefault()}),$("body").on("click","#MdImage .image > .btn",function(){InsertImage="!["+$(this).attr("data-name")+"]("+$(this).attr("data-url")+")",$(".editor-toolbar .insert-image").trigger("click"),$("#MdImage").modal("toggle")}),$("body").on("click","#insertUrl .modal-footer .btn",function(){InsertImage="![]("+$("#insertUrl input").val()+")",$(".editor-toolbar .insert-image").trigger("click"),$("#MdImage").modal("toggle")}),$("body").on("click","#Upload",function(){$("#MdImage .uploader, #MdImage .folders, #MdImage .files").toggle()}),$("body").on("click",".dz-remove",function(){$(this).closest(".dz-preview").remove()}),$("body").on("click",".uploader .btn-danger",function(){$("#MdImage .uploader, #MdImage .folders, #MdImage .files").toggle(),$("form.dropzone .dz-preview").remove(),$("form.dropzone").removeClass("dz-started")}),$("body").on("click","#MdImage .uploader .btn-success",function(){_path=$("#MdImage .breadcrumb").attr("data-current-path"),_path?_saveIn=_path+"/":_saveIn="",_imagesToUpload=$("#MdImage .manager-drop img").length,_augmentIn=100/_imagesToUpload,_imagesUploaded=0,0===_imagesToUpload?alert("There are no images to upload"):($("#MdImage .uploading, .noclick").toggle(),$("#MdImage .manager-drop img").each(function(){_base=$(this).attr("src"),_baseClean=_base.replace("data:image/png;base64,",""),_imgName=$(this).attr("alt"),Create(_saveIn+_imgName,RepoBranch,_baseClean,"uploaded by"+UserLogin,function(a){$("#MdImage .uploading .progress").attr("value",parseFloat($("#MdImage .progress").attr("value"))+parseFloat(_augmentIn)),$("#MdImage .uploading .percent").text(Math.floor(parseInt($("#MdImage .uploading .percent").prev().attr("value")))+" %"),_imagesUploaded+=1,_imagesUploaded===_imagesToUpload&&(MdImage(_path),$("#MdImage .uploader, #MdImage .folders, #MdImage .files").toggle(),$("#MdImage form.manager-drop .dz-preview").remove(),$("#MdImage form.manager-drop").removeClass("dz-started"),$("#MdImage .uploading .progress").attr("value","0"),$("#MdImage .uploading .percent").text("0"),$("#MdImage .uploading, .noclick").toggle())})}))}),$("#FromUrl").click(function(){$("#insertUrl").modal("toggle")}),$("body").on("input","#insertUrl input",function(){_imageUrl=$(this).val(),$(this).parent().next().children().attr("src",_imageUrl)}),$("#insertUrl").on("hidden.bs.modal",function(){$("#insertUrl input").val(""),$("#insertUrl img").attr("src","")}),$("#MdImage").on("hidden.bs.modal",function(){$("#MdImage .folders, #MdImage .files, #MdImage .images").empty()}),$(document).on("click",".options .delete",function(){$("#confirmDelete").modal("toggle"),$("#confirmDelete #Confirm").attr("data-path",$(this).attr("data-path"))}),$(document).on("click","#confirmDelete #Confirm",function(){$(".deleting, .noclick").toggle(),Delete($(this).attr("data-path"),RepoBranch,function(a){MdContents?$("#MdImage .deleting, .noclick").toggle():(ElementPath?Open(ElementName,ElementPath):ShowPages?Root(RepoName,RepoOwner,RepoBranch,RepoUrl,!0):Root(RepoName,RepoOwner,RepoBranch,RepoUrl),$(".deleting, .noclick").toggle()),$("main .images").empty()})}),$(document).on("click",".fileActions .btn",function(){$("#CommitMsg").modal("toggle")}),$(".create").on("click",function(){$("#createFile form label").text(ElementPath?RepoName+"/"+ElementPath+"/":ShowPages?RepoName+"/Pages/":RepoName+"/")}),$("#createFile input").on("input",function(){0===$(this).val().length?$("#createFile .modal-footer").html('<button type="button" class="btn btn-success use-images" disabled><i class="fa fa-ban"></i></button>'):1===$(this).val().length&&$("#createFile .modal-footer").html('<button type="button" class="create btn btn-success use-images"><i class="fa fa-check"></i> Create</button>')}),$("body").on("click","#createFile .modal-footer .create",function(){$("#createFile .modal-footer").html('<button type="button" class="btn btn-success use-images" disabled><div class="spinner"><div class="double-bounce1"></div><div class="double-bounce2"></div></div></button>'),ElementPath?ElementPath.indexOf("_posts")>=0?newFile=ElementPath+"/"+CurrentDate()+$("#createFile form input").val():newFile=ElementPath+"/"+$("#createFile form input").val():newFile=$("#createFile form input").val(),Create(newFile,RepoBranch,window.btoa(""),"created by"+UserLogin,function(a){$("#createFile").modal("toggle"),ElementPath?Open(ElementName,ElementPath):ShowPages?Root(RepoName,RepoOwner,RepoBranch,RepoUrl,!0):Root(RepoName,RepoOwner,RepoBranch,RepoUrl),$("#createFile .modal-footer").html('<button type="button" class="btn btn-success use-images" disabled><i class="fa fa-ban"></i></button>')})}),$("#createFile").on("hidden.bs.modal",function(){$("#createFile .modal-footer").html('<button type="button" class="btn btn-success use-images" disabled><i class="fa fa-ban"></i></button>'),$("#createFile input").val("")}),Dropzone.options.addFromFolder={thumbnailWidth:null,thumbnailHeight:null,init:function(){this.on("thumbnail",function(a,e){$('img[alt="'+a.name+'"]').parent().next().append('<div class="dz-remove"><i class="fa fa-times-circle"></i> Remove</div>')})}},Dropzone.prototype.submitRequest=function(a,e,t){},$(".upload").on("click",function(){$("#uploadFile form label").text(ElementPath?RepoName+"/"+ElementPath+"/":ShowPages?RepoName+"/Pages/":RepoName+"/")}),$("body").on("click","#uploadFile .uploader .btn-success",function(){_filesToUpload=$("#uploadFile .addimage-drop img").length,_augmentIn=100/_filesToUpload,_imagesUploaded=0,0===_filesToUpload?alert("There are no images to upload"):(ElementPath?$("#uploadFile input").val()?_saveIn=ElementPath+"/"+$("#uploadFile form input").val()+"/":_saveIn=ElementPath+"/":$("#uploadFile input").val()?_saveIn=$("#uploadFile form input").val()+"/":_saveIn="",$("#uploadFile, #Uploading").modal("toggle"),$("#uploadFile .addimage-drop img").each(function(){$(".upload").attr("disabled",!0),_base=$(this).attr("src"),_baseClean=_base.replace("data:image/png;base64,",""),_imgName=$(this).attr("alt"),Create(_saveIn+_imgName,RepoBranch,_baseClean,"uploaded by"+UserLogin,function(a){$("#Uploading .progress").attr("value",parseFloat($("#Uploading .progress").attr("value"))+parseFloat(_augmentIn)),$("#Uploading .percent").text(Math.floor(parseInt($("#Uploading .progress").attr("value")))+" %"),_imagesUploaded+=1,_imagesUploaded===_filesToUpload&&($("#UploadSuccess, #Uploading").modal("toggle"),Open(ElementName,ElementPath),$(".upload").attr("disabled",!1),$("#uploadFile form.addimage-drop .dz-preview").remove(),$("#uploadFile #filename").val(""),$("#uploadFile form.addimage-drop").removeClass("dz-started"),$("#Uploading .progress").attr("value","0"),$("#Uploading .percent").text("0"),$("#uploadFile input").val(""))})}))}),$("#uploadFile").on("hidden.bs.modal",function(){$("#uploadFile form.addimage-drop .dz-preview").remove(),$("#uploadFile #filename").val("")}),$("#Uploading button").click(function(){$("#Uploading .noclick").toggle(),$("#Uploading").toggleClass("minimized"),$("#Uploading button i").toggleClass("fa-minus").toggleClass("fa-plus")}),$("body").append('<div class="alert alert-info alert-dismissible fade in bug" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>You are using the first release of Meet Hyde so there may be bugs, if you find something please <a href="https://github.com/MeetHyde/MeetHyde/issues" target="_blank"><b>let us know</b></a>. Follow us on <a href="https://twitter.com/MeetHyde" target="_blank"><b>twitter</b></a> to stay updated </div>');